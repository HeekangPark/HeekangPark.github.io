---
title: "버전 관리 시스템 (Version Control System)"
order: 2
date_created: "2021-01-08"
date_modified: "2021-01-08"
---

# 버전 관리 시스템 (VCS, Version Control System)

코딩을 하다 보면 다음과 같은 경험들을 한 번쯤은 해 볼 것이다.

- 너무 많은 복사본이 있어 어떤 것이 최신 파일인지, 어떤 버전이 어떻게 수정된 것인지 알기 어렵다.
- 잘 작동하는 코드에 새로운 기능을 추가하다가 원인을 알 수 없는 오류가 발생해서, 하다못해 다시 원상태로 돌리기라도 하고 싶은데 너무 많은 수정사항이 있어 돌아갈 수가 없다.
- 여러 명이서 동시에 작업을 할 때, 여러 명이 동시에 여러 파일을 수정해 오류 또는 충돌이 발생한다(혹은 동시에 편집할 수 없어 한참동안 기다려야 했다).
- 여러 명이서 작업을 할 때, 누가 어떤 부분을 어떻게 수정했는지 알 수가 없다.

버전 관리 시스템(VCS, Version Control System)은 바로 이런 문제를 해결하기 위해 고안된 시스템이다. 버전 관리(Version Control), 혹은 소프트웨어 형상관리(SCM, Software Configuration Management)란 소프트웨어 개발 및 유지 보수 과정에서 발생하는 소스 코드, 문서 등의 생성, 변경 이력, 삭제 이력 등을 관리하는 것을 말한다. 혼자서 개발한다면 모를까[^1], 여러 명이서 복잡한 소프트웨어를 개발할 때 버전 관리를 하지 않는다면 그야말로 헬게이트를 마주하게 될 것이다.

[^1]: 사실 혼자서 개발할 때도 토이 프로젝트가 아닌 이상 버전 관리 시스템을 사용하지 않으면 헬게이트를 마주할 가능성이 높다.

# 버전 관리 시스템의 종류

파일들의 버전을 관리하는 가장 간단한 방법은 Fig.01 처럼 각 버전의 복사본을 디렉토리에 함께 보관하는 것이다.

{% include caption-img.html src="vcs-hell.png" title="Fig.01 복사본을 이용한 버전 관리" description="복사본을 이용해 버전 관리를 하면 효율적인 버전 관리가 어렵다. 버전 관리 시스템(VCS)을 사용하면 효율적인 버전 관리가 가능하다." %}

하지만 우리 모두 익히 알고 있듯이 이 방법에는 문제가 많다.

- 파일의 버전 이력을 알기 어렵다. 어떤 파일이 최신 파일인지, 어떤 파일이 어떤 파일로부터 나왔는지 알기 어렵다.
- 큰 파일의 버전을 이런 식으로 관리하려 하면 용량을 많이 차지하게 되고, 느리다.
- 실수로 파일을 삭제하거나, 다른 버전을 덮어씌우는 등 실수의 여자가 크다.

이런 문제를 해결하기 위해 로컬 버전 관리 시스템(Local VCS, Local Version Control System)이 고안되었다.

## 로컬 버전 관리 시스템 (Local VCS, Local Version Control System)

로벌 버전 관리 시스템은 간단한 데이터베이스를 이용해 파일의 이력(변경 정보)를 관리하는 시스템이다.

{% include caption-img.html src="vcs-local-vcs.png" title="Fig.02 로컬 버전 관리 시스템" description="로벌 버전 관리 시스템은 간단한 데이터베이스를 사용해 파일의 변경 정보를 관리하는 시스템이다." %}

유명한 로컬 버전 관리 시스템으로는 RCS(Revision Control System)가 있다. RCS는 파일에서 변경되는 부분(Patch)만 기억해 용량 문제를 해결한다. RCS에서의 버전 변경은 해당 버전까지의 일련의 변화들(Patch Set)을 적용/해제하는 식으로 동작한다. 예를 들어, 위 Fig.02에서 현재 버전 `#5` 상태에 있는 `File`을 버전 `#9` 상태로 바꿔야 한다면, RCS는 다음 연산을 수행한다.[^2]

[^2]: `#a-#b`는 인접한 버전 `#a`와 버전 `#b` 사이의 변화량을 의미한다.

`#9` = `#5` - `#4-#5` - `#3-#4` - `#2-#3` + `#2-#6` + `#6-#7` + `#7-#8` + `#8-#9`
{: .text-align-center }

그런데 로컬 버전 관리 시스템은 이름 그대로 로컬에서만 동작한다. 다른 개발자와 협업을 해야 하는 상황에서는 로컬 버전 관리 시스템으로의 버전 관리가 쉽지 않다. 이에 고안된 것이 중앙 집중식 버전 관리 시스템(CVCS, Centralized Version Control System)이다.

## 중앙 집중식 버전 관리 시스템 (CVCS, Centralized Version Control System)

중앙 집중식 버전 관리 시스템은 파일 및 변경 이력 등을 서버로 옮긴 것이다. 중앙의 서버가 파일들과 이들의 변경 이력을 관리하고, 각 클라이언트는 서버에 접속해서 특정 버전의 스냅샷(snapshot)을 받아서 사용하는 형태로 동작한다. 이렇게 클라이언트가 서버로부터 특정 버전의 스냅샷을 받아 사용하는 것을 체크아웃(checkout)이라 한다. 도서관에서 책을 빌릴 때 "check out a book"이라는 표현을 쓰는데, 이와 비슷한 뜻으로 이해하면 되겠다.

{% include caption-img.html src="vcs-cvcs.png" title="Fig.03 중앙 집중식 버전 관리 시스템" description="중앙 집중식 버전 관리 시스템에서는 협업이 가능하다." %}

중앙 집중식 버전 관리 시스템에서는 모든 클라이언트들이 단 하나의 데이터베이스만을 바라보므로 동기화 문제가 없고 관리가 편하다는 장점이 있어 오래도록 사용되었다. 중앙 집중식 버전 관리 시스템에는 SVN(SubVersion), CVS(Concurrent Versions System) 등이 있다.

하지만 중앙 집중식 버전 관리 시스템에도 단점이 있다.

- 모든 버전 관리 관련 동작은 서버에서 처리되어야 하므로 서버의 부하가 크다.
- 서버가 죽거나 장애가 발생하면 버전 관리가 이루어지지 않는다.
- 오프라인 상태에서는 버전 관리 시스템을 사용할 수 없다.
- 모든 버전 관리 관련 동작은 적어도 한 번 서버를 경유해야 하므로 속도가 느리다. 하다못해 로그를 보는 것 조차 서버에서 데이터를 받아와야 하므로 느리다.
- 서버에서 데이터가 망가지거나 삭제되면 복구하기 매우 어렵다.

이를 해결하기 위해 등장한 것이 분산식 버전 관리 시스템(DVCS, Distributed Version Control System)이다.

## 분산식 버전 관리 시스템 (DVCS, Distributed Version Control System)

중앙 집중식 버전 관리 시스템의 문제들은 모두 서버가 파일 및 파일 변경 이력 등을 독점하기 때문에 발생한다. 분산식 버전 관리 시스템에서는 각 클라이언트들이 모두 서버의 백업본을 가진다.

{% include caption-img.html src="vcs-dvcs.png" title="Fig.04 분산식 버전 관리 시스템" description="분산식 버전 관리 시스템에서는 각 클라이언트들이 모두 서버의 백업본을 가진다." %}

그렇기에 분산식 버전 관리 시스템에서는 서버가 죽거나 오프라인 상태에서도 버전 관리를 할 수 있고, 대부분의 버전 관리가 로컬에서 이루어지므로 속도도 빠르다. 다만 중앙 집중식 버전 관리 시스템에 비해 복잡하고, 동기화 문제가 있다는 단점이 있다.

분산식 버전 관리 시스템에는 Git, Mecurial, Bazaar 등이 있다. 이 중 가장 유명하고, 또 가장 널리 쓰이는 것이 Git이다.

# Git의 역사

Git은 우리에게 리눅스로 유명한 리누스 토르발즈가 2005년에 개발한 시스템이다. 알다시피 리눅스 커널은 리누스 토르발즈의 관리감독 하에 여러 명의 기여자들의 기여로 유지보수되는 시스템이다. 그런데 리누스 토르발즈는 CVS, SVN과 같은 기존 버전 관리 시스템들의 성능이 마음에 들지 않아 2002년까지도 이들을 사용하지 않고 메일링 리스트, 패치, 압축파일로만 리눅스 커널을 관리했다고 한다. 그러다가 결국 버틸 수 없어 BitKeeper라는 상용 분산식 버전 관리 도구를 사용하게 된다(BitKeeper는 원래 유료 프로그램이지만, 제작사가 리눅스 커뮤니티에게 무료로 사용할 수 있게 허락했다고 한다).

그러던 중 리눅스 커뮤니티의 엔드류 트리겔(Andrew Tridgell)[^3]이라는 개발자가 BitKeeper의 이용 약관을 위반[^4]하는 일이 발생하였다. 이로 인해 BitKeeper측에서는 더 이상 리눅스 커뮤티니가 BitKeeper를 무료로 사용할 수 없도록 라이선스 제한을 걸게 된다. 이에 리누스 토르발즈는 본인이 직접 버전 관리 시스템를 만들기로 하여, 소문에 의하면 2주만에 Git을 뚝닥 만들었다고 한다. 이렇게 만들어진 Git의 성능은 너무나도 좋아, 이제 버전 관리 시스템의 대명사가 되었다. 오늘날 Git은 개발자라면 반드시 익숙해져야만 할, 개발에 꼭 필요한 도구가 되었다.[^5]

[^3]: rsync, 삼바(Samba) 등을 개발한 개발자로 유명하다.
[^4]: BitKeeper의 통신 프로토콜을 리버스 엔지니어링했다고 한다.
[^5]: 참고로 Git이 VCS의 제왕이 되고 난 후, BitKeeper는 유료 정책도 포기하고 코드도 오픈소스로 풀었지만 Git의 아성을 뛰어넘을 수는 없었다고 한다.