---
title: "가설검정(hypothesis testing)"
order: 2
date_created: "2021-10-24"
date_modified: "2021-10-24"
---

# 가설검정(hypothesis testing)

우리는 모집단의 성질에 대해 가설(hypothesis)을 세운다.

가설이 맞는지 확인하려면 모집단 전체를 확인하는 것이 맞지만, 현실적으로 이게 불가능한 경우가 많다.

따라서 표본을 추출해, 이 표본의 통계값을 기반으로 모수를 추정(inference)하고, 이 추정을 기반으로 가설이 맞는지를 검정(testing)해야 한다.

하지만 표본의 통계값으로부터 추정한 모수는 항상 오차가 있을 수 있다.

따라서 가설검정을 할 때에는, 이 오차를 고려하더라도 통계적으로 유의미한 결과가 나왔을 때만 가설이 맞다고 해야 한다.

이를 알고리즘으로 표현하면 다음과 같다.

1. 귀무가설($H\_0$, null hypothesis)과 대립가설($H\_A$, alternative hypothesis)을 설정한다.
   
    - 귀무가설 : 대립가설의 반대 가설. 현재 상황을 나타내는 가설. 새로울게 없는 가설. 증명되도 '딱히 놀랍지 않을' 가설. 기각(reject)시키는게 목적인 가설.
    - 대립가설 : 참임을 보이고 싶은 가설. 증명하고 싶은 가설. 새로운 가설. 증명되면 '놀라울' 가설. 귀무가설이 기각되었을때 수용(accept)할 가설.

2. 귀무가설이 참이라 가정한다.
3. 추출된 표본에 대한 통계량을 구한 후, 다양한 통계적 기법들을 이용해 모수를 추정한다(이를 검정통계량(test statistic)을 구한다고 표현한다).
4. 3에서 추정한 모수를 기반으로, 귀무가설이 참일 때 해당 표본을 관찰할 수 있는 확률(이를 p-value라 한다)을 구한다.

    $$\text{p-value} = P(\text{Observation} \,|\,H_0\text{ is true})$$

5. 4에서 계산한 p-value가 특정 값(이를 유의수준($\alpha$, significance level)이라 한다)을 넘기는지를 확인한다.

    - p-value가 유의수준보다 큰 경우 : 귀무가설이 맞다고 할 때, 해당 표본을 관찰한 것이 그리 놀라운 일이 아니게 된다. 다시말해, 귀무가설로도 관측 결과(표본)를 충분히 잘 설명할 수 있다. 즉 귀무가설이 거짓일 이유가 딱히 없다. 이 경우 "귀무가설을 기각(reject)할 수 없다"고 한다.
    - p-value가 유의수준보다 작은 경우 :  귀무가설이 맞다고 할 때, 해당 표본을 관찰한 것은 놀라운 일이 된다. 다시말해, 귀무가설로는 관측 결과(표본)을 충분히 잘 설명할 수 없다. 즉 귀무가설이 거짓일 가능성이 높다. 이 경우 "귀무가설을 기각한다"고 한다.

6. 귀무가설이 기각되면, 귀무가설의 반대인 대립가설을 수용(accept)한다(우리가 목표한 결과를 구한 것이다). 귀무가설을 기각할 수 없다면, 관찰한 데이터는 통계적으로 대립가설이 참임을 보여주지 못한 것이다(목표 달성에 실패한 것이다).

즉 가설검정 과정은 "검정통계량이 기준을 벗어나는지를 확인하는 과정"이라 요약할 수 있다.

이때 p-value 값이 작을수록 목표(귀무가설을 기각하기)를 달성하기 더 쉬워진다.

일반적으로 유의수준으로 5%($\alpha = 0.05$)를 쓰는 경우가 많다.

# decision error

가설검정 프레임워크는 (당연히) 완전하지 않고, 오류가 있을 수 있다.

두 가지 종류의 오류가 있다.

- 1종 오류(type 1 error) : 귀무가설이 참인데(= 대립가설이 거짓인데), 귀무가설을 잘못 기각한 경우
- 2종 오류(type 2 error) : 귀무가설이 거짓인데(= 대립가설이 참인데), 귀무가설 기각에 실패한 경우

유의수준이 높아지면 표본을 관측한게 별로 놀라운 일도 아닌데 놀랍다고 판단하게 된다.

유의수준이 높아지면 p-value가 크더라도 귀무가설을 기각하게 된다(더 헐렁하게 검정을 진행하게 된다).

유의수준이 높아지면 1종 오류를 범할 확률이 높아진다.

따라서 유의수준은 1종 오류를 범할 확률과 같다.

만약 1종 오류의 위험성(risk)이 크다면 유의수준을 낮추는 것이 좋다.

만약 2종 오류의 위험성이 크다면 유의수준을 높이는 것이 좋다.

# z-test



# t-test
