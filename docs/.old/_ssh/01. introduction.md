---
title: "SSH란?"
order: 1
date_created: "2021-12-01"
date_modified: "2021-12-18"
---

# 쉘 (Shell)

쉘이란 사용자의 명령을 커널(Kernel)에 전달하고, 그 처리 결과를 다시 사용자에게 알려주는 프로그램을 뜻한다. 쉘은 커널을 마치 껍질처럼 감싸고 있어, 사용자는 이 껍질을 통해야만 커널과 통신할 수 있다 하여 이런 이름이 붙었다.

쉘은 사용자로부터 입력을 받아들이는 방식에 따라[^1] 크게 두 가지로 나눌 수 있다.

- CLI (Command Line Interface)[^2] : csh, bash, ksh, zsh, cmd.exe 등
- GUI (Graphic User Interface)[^3] : Gnome, KDE 등

[^1]: 이를 유저 인터페이스(user interface), 혹은 그냥 인터페이스(interface)라 부른다.
[^2]: CUI(Character-based User Interface, Console User Interface), TUI(Text-based User Interface, Terminal User Interface)라고도 부른다.
[^3]: 데스크톱 환경(Desktop Environment)이라고도 부른다.

하지만 일반적으로 쉘이라 하면 CLI 환경의 쉘을 의미한다.

# SSH (Secure Shell)

SSH는 네트워크 상 다른 컴퓨터의 쉘을 사용할 수 있게 해 주는 프로그램 혹은 그 프로토콜을 의미한다. SSH를 사용하면 원격에서 네트워크 상의 컴퓨터에 접속할 수 있다. SSH는 강력한 보안을 제공하기에 안전하지 못한, 개방된 네트워크에서도 안전하게 통신할 수 있다. 서버 관리자가 항상 서버 옆에 있을 수는 없으므로, 서버 관리자는 일반적으로 원격지에서 SSH를 통해 서버에 접속해 서버를 관리하게 된다.

SSH가 동작하는 순서는 이렇다. SSH 서버(SSH Server)라 불리는 데본(daemon)이 항상 돌면서 원격지의 SSH 클라이언트(SSH Client)로부터의 접속을 기다리고 있다가, SSH 클라이언트가 접속을 시도하면 다음 순서로 SSH 서버와 클라이언트 간 보안 연결이 수립된다.

1. 연결 이전, 서버와 클라이언트는 서로의 공개 키(Public Key)를 알고 있다.[^4]
2. 클라이언트가 서버에 연결 요청을 보내면, 우선 서로를 인증(Authentication)하는 절차를 거친다.
   1. 서버 인증 : 클라이언트는 난수를 하나 생성한 후, 이를 서버의 공개 키로 암호화해서 서버에게 전송하고, 난수의 해시(Hash)를 저장해 둔다. 서버는 전송받은 암호화된 난수를 서버 자신의 개인 키(Private Key)로 복호화한 후, 복호화된 난수의 해시를 계산해 클라이언트에게 전송한다. 클라이언트는 전송받은 난수의 해시를 저장된 해시와 비교하여 서버를 인증한다.
   2. 클라이언트 인증 : 위 서버 인증 과정에서 서로의 역할만 바꿔 동일하게 진행한다. 즉, 서버는 난수를 하나 생성한 후, 이를 클라이언트의 공개 키로 암호화해서 클라이언트에 전송하고, 난수의 해시를 저장해 둔다. 클라이언트는 정송받은 암호화된 난수를 클라이언트 자신의 개인 키로 복호화한 후, 복호화된 난수의 해시를 계산해 서버에게 전송한다. 서버는 전송받은 난수의 해시를 저장된 해시와 비교하여 클라이언트를 인증한다.
3. 양 측간의 인증이 끝나면, 비대칭 키를 이용하여 대칭 키(Session Key)[^5]를 교환한다.

[^4]: OpenSSH의 경우, 서버의 공개 키는 클라이언트의 `~/.ssh/known_hosts` 파일에, 클라이언트의 공개 키는 서버의 `~/.ssh/authorized_keys` 파일에 저장된다.
[^5]: 세션 키(Session Key)라고도 한다.

교환된 대칭 키를 이용해 SSH 서버와 클라이언트 간 모든 통신은 암호화하여 진행되기에, SSH 연결은 매우 안전하다.